! Edge1 — AS 65000 border router
! OSPF Area 0 internal, eBGP peering to NetClaw over GRE
frr version 8.5
frr defaults traditional
hostname edge1
log syslog informational
no ipv6 forwarding
service integrated-vtysh-config
!
interface lo
 ip address 1.1.1.1/32
exit
!
! GRE tunnel to NetClaw host — created by setup-gre.sh inside container
interface gre-netclaw
 ip address 172.16.0.1/30
 ip ospf network point-to-point
exit
!
router ospf
 ospf router-id 1.1.1.1
 network 1.1.1.1/32 area 0.0.0.0
 network 10.0.12.0/24 area 0.0.0.0
 passive-interface lo
exit
!
router bgp 65000
 bgp router-id 1.1.1.1
 no bgp ebgp-requires-policy
 no bgp default ipv4-unicast
 !
 ! iBGP to Core (route reflector)
 neighbor 2.2.2.2 remote-as 65000
 neighbor 2.2.2.2 update-source lo
 !
 ! eBGP to NetClaw over GRE tunnel
 neighbor 172.16.0.2 remote-as 65001
 !
 address-family ipv4 unicast
  neighbor 2.2.2.2 activate
  neighbor 2.2.2.2 next-hop-self
  neighbor 172.16.0.2 activate
  network 10.0.12.0/24
  network 10.0.100.0/24
 exit-address-family
exit
!
end
